<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></dd>
  </dl>
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#delete_all_articles_in_category-instance_method" title="#delete_all_articles_in_category (instance method)">#<strong>delete_all_articles_in_category</strong>(category_id)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes all articles related to a category if they are not connected to any other category.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Redirects to the main page “/games”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__articles__id-instance_method" title="#GET /articles/:id (instance method)">#<strong>GET /articles/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays one article.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__articles__id_edit-instance_method" title="#GET /articles/:id/edit (instance method)">#<strong>GET /articles/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays a form to edit one existing article.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__articles_new-instance_method" title="#GET /articles/new (instance method)">#<strong>GET /articles/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays a form to create a new article.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__categories__id-instance_method" title="#GET /categories/:id (instance method)">#<strong>GET /categories/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays one category and its articles.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__games-instance_method" title="#GET /games (instance method)">#<strong>GET /games</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays all games.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__games__id-instance_method" title="#GET /games/:id (instance method)">#<strong>GET /games/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays one game and its categories.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__invalid-instance_method" title="#GET /invalid (instance method)">#<strong>GET /invalid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays an error message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__show_login-instance_method" title="#GET /show_login (instance method)">#<strong>GET /show_login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays a login form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__show_register-instance_method" title="#GET /show_register (instance method)">#<strong>GET /show_register</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays a register form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#is_logged_in-instance_method" title="#is_logged_in (instance method)">#<strong>is_logged_in</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Authorization: is the user logged in.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__articles-instance_method" title="#POST /articles (instance method)">#<strong>POST /articles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new article and redirects to “/articles/#&#39;id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__articles__id_delete-instance_method" title="#POST /articles/:id/delete (instance method)">#<strong>POST /articles/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes one article and its relations to categories, and redirects to “/games/#game_id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__articles__id_update-instance_method" title="#POST /articles/:id/update (instance method)">#<strong>POST /articles/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates one existing article and redirects to “articles/#article_id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories-instance_method" title="#POST /categories (instance method)">#<strong>POST /categories</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new category and redirects to “/games/#game_id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories__id_delete-instance_method" title="#POST /categories/:id/delete (instance method)">#<strong>POST /categories/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes one category and all its articles, and redirects to “/games/#game_id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories__id_update-instance_method" title="#POST /categories/:id/update (instance method)">#<strong>POST /categories/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Changes the name of one existing category and redirects to “/categories/#category_id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__games-instance_method" title="#POST /games (instance method)">#<strong>POST /games</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new game and redirects to “/”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__games__id_delete-instance_method" title="#POST /games/:id/delete (instance method)">#<strong>POST /games/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes one game and its categories and articles, and redirects to “/games”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__games__id_update-instance_method" title="#POST /games/:id/update (instance method)">#<strong>POST /games/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Changes the name of one existing game and redirects to “/games/:id”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__login-instance_method" title="#POST /login (instance method)">#<strong>POST /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attempts login and updates the session and redirects to “/games”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__logout-instance_method" title="#POST /logout (instance method)">#<strong>POST /logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The user log outs and redirects to “/games”.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__register-instance_method" title="#POST /register (instance method)">#<strong>POST /register</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Registers a new user and redirects to either “/invalid” or “/show_login”.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Model.html#authentication-instance_method" title="Model#authentication (method)">#authentication</a></span>, <span class='object_link'><a href="Model.html#connect_to_db-instance_method" title="Model#connect_to_db (method)">#connect_to_db</a></span>, <span class='object_link'><a href="Model.html#connect_to_db_array-instance_method" title="Model#connect_to_db_array (method)">#connect_to_db_array</a></span>, <span class='object_link'><a href="Model.html#connect_to_mdb-instance_method" title="Model#connect_to_mdb (method)">#connect_to_mdb</a></span>, <span class='object_link'><a href="Model.html#connect_to_mdb_array-instance_method" title="Model#connect_to_mdb_array (method)">#connect_to_mdb_array</a></span>, <span class='object_link'><a href="Model.html#cooldown_validation-instance_method" title="Model#cooldown_validation (method)">#cooldown_validation</a></span>, <span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">#db_delete</a></span>, <span class='object_link'><a href="Model.html#db_get_all-instance_method" title="Model#db_get_all (method)">#db_get_all</a></span>, <span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">#db_get_all_equal</a></span>, <span class='object_link'><a href="Model.html#db_get_all_equal_order_asc-instance_method" title="Model#db_get_all_equal_order_asc (method)">#db_get_all_equal_order_asc</a></span>, <span class='object_link'><a href="Model.html#db_get_all_order_asc-instance_method" title="Model#db_get_all_order_asc (method)">#db_get_all_order_asc</a></span>, <span class='object_link'><a href="Model.html#db_get_articles_in_category-instance_method" title="Model#db_get_articles_in_category (method)">#db_get_articles_in_category</a></span>, <span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">#db_get_categories_containing_article</a></span>, <span class='object_link'><a href="Model.html#db_get_one-instance_method" title="Model#db_get_one (method)">#db_get_one</a></span>, <span class='object_link'><a href="Model.html#db_get_one_equal-instance_method" title="Model#db_get_one_equal (method)">#db_get_one_equal</a></span>, <span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">#db_insert_into</a></span>, <span class='object_link'><a href="Model.html#db_insert_one_into-instance_method" title="Model#db_insert_one_into (method)">#db_insert_one_into</a></span>, <span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">#db_select_is_empty</a></span>, <span class='object_link'><a href="Model.html#db_update_condition-instance_method" title="Model#db_update_condition (method)">#db_update_condition</a></span>, <span class='object_link'><a href="Model.html#db_update_two_condition-instance_method" title="Model#db_update_two_condition (method)">#db_update_two_condition</a></span>, <span class='object_link'><a href="Model.html#digest_password-instance_method" title="Model#digest_password (method)">#digest_password</a></span>, <span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">#is_empty</a></span>, <span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">#is_integer_empty</a></span>, <span class='object_link'><a href="Model.html#is_username_unique-instance_method" title="Model#is_username_unique (method)">#is_username_unique</a></span>, <span class='object_link'><a href="Model.html#register_user-instance_method" title="Model#register_user (method)">#register_user</a></span>, <span class='object_link'><a href="Model.html#validate_enough_categories_for_article-instance_method" title="Model#validate_enough_categories_for_article (method)">#validate_enough_categories_for_article</a></span>, <span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">#validate_text_length</a></span>, <span class='object_link'><a href="Model.html#validate_user_and_pass-instance_method" title="Model#validate_user_and_pass (method)">#validate_user_and_pass</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="delete_all_articles_in_category-instance_method">
  
    #<strong>delete_all_articles_in_category</strong>(category_id)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes all articles related to a category if they are not connected to any other category</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The id of the category</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>nothing.</p>
</div>
      
    </li>
  
</ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


610
611
612
613
614
615
616
617
618
619
620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 610</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_all_articles_in_category'>delete_all_articles_in_category</span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_articles'>all_articles</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_articles_in_category'><span class='object_link'><a href="Model.html#db_get_articles_in_category-instance_method" title="Model#db_get_articles_in_category (method)">db_get_articles_in_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_articles'>all_articles</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_article'>article</span><span class='op'>|</span>
        <span class='id identifier rubyid_article_belong_category_number'>article_belong_category_number</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_categories_containing_article'><span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">db_get_categories_containing_article</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_article'>article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_article_belong_category_number'>article_belong_category_number</span> <span class='op'>&lt;=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article'>article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>

    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Redirects to the main page “/games”</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 137</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__articles__id-instance_method">
  
    #<strong>GET /articles/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays one article</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">Model#db_select_is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">Model#db_get_categories_containing_article</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464
465
466
467
468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 462</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/:id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_article_id'>article_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='ivar'>@article</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@article</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Page Not Found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  
    <span class='ivar'>@game</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='ivar'>@categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_categories_containing_article'><span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">db_get_categories_containing_article</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
    
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;articles/show&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__articles__id_edit-instance_method">
  
    #<strong>GET /articles/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays a form to edit one existing article</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li>Model#is_author</li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">Model#db_select_is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">Model#db_get_categories_containing_article</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 486</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/:id/edit</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_article_id'>article_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_author'>is_author</span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>    
    <span class='ivar'>@article</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@article</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Page Not Found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@game</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='ivar'>@related_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_categories_containing_article'><span class='object_link'><a href="Model.html#db_get_categories_containing_article-instance_method" title="Model#db_get_categories_containing_article (method)">db_get_categories_containing_article</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
    <span class='ivar'>@all_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;articles/edit&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__articles_new-instance_method">
  
    #<strong>GET /articles/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays a form to create a new article</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s game’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s primary category’s id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">Model#db_select_is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal_order_asc-instance_method" title="Model#db_get_all_equal_order_asc (method)">Model#db_get_all_equal_order_asc</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 388</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>
    <span class='ivar'>@game</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='ivar'>@category</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@game</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@game</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Page Not Found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@all_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal_order_asc'><span class='object_link'><a href="Model.html#db_get_all_equal_order_asc-instance_method" title="Model#db_get_all_equal_order_asc (method)">db_get_all_equal_order_asc</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;articles/new&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__categories__id-instance_method">
  
    #<strong>GET /categories/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays one category and its articles</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">Model#db_select_is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_articles_in_category-instance_method" title="Model#db_get_articles_in_category (method)">Model#db_get_articles_in_category</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


301
302
303
304
305
306
307
308
309
310
311
312
313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 301</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/:id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_cat_id'>cat_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='ivar'>@category</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_cat_id'>cat_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@category</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Page Not Found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='ivar'>@articles</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_articles_in_category'><span class='object_link'><a href="Model.html#db_get_articles_in_category-instance_method" title="Model#db_get_articles_in_category (method)">db_get_articles_in_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cat_id'>cat_id</span><span class='rparen'>)</span>    
    
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='ivar'>@category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@game</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;categories/show&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__games-instance_method">
  
    #<strong>GET /games</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays all games</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#db_get_all_order_asc-instance_method" title="Model#db_get_all_order_asc (method)">Model#db_get_all_order_asc</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 144</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
    <span class='ivar'>@games</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_order_asc'><span class='object_link'><a href="Model.html#db_get_all_order_asc-instance_method" title="Model#db_get_all_order_asc (method)">db_get_all_order_asc</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;games/index&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__games__id-instance_method">
  
    #<strong>GET /games/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays one game and its categories</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID of the article</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">Model#db_select_is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal_order_asc-instance_method" title="Model#db_get_all_equal_order_asc (method)">Model#db_get_all_equal_order_asc</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 184</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/:id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='ivar'>@game</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_db_select_is_empty'><span class='object_link'><a href="Model.html#db_select_is_empty-instance_method" title="Model#db_select_is_empty (method)">db_select_is_empty</a></span></span><span class='lparen'>(</span><span class='ivar'>@game</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Page Not Found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
        
    <span class='ivar'>@categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal_order_asc'><span class='object_link'><a href="Model.html#db_get_all_equal_order_asc-instance_method" title="Model#db_get_all_equal_order_asc (method)">db_get_all_equal_order_asc</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> 

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;games/show&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__invalid-instance_method">
  
    #<strong>GET /invalid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays an error message</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


597
598
599
600
601</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 597</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='ivar'>@error_msg</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:invalid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__show_login-instance_method">
  
    #<strong>GET /show_login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays a login form</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 66</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/show_login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='ivar'>@cooldown_time</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:login</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__show_register-instance_method">
  
    #<strong>GET /show_register</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays a register form</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 16</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/show_register</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:register</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_logged_in-instance_method">
  
    #<strong>is_logged_in</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Authorization: is the user logged in</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


625
626
627</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 625</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_logged_in'>is_logged_in</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__articles-instance_method">
  
    #<strong>POST /articles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new article and redirects to “/articles/#&#39;id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s game’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>primary_category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s primary category’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>title,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s title</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>text,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s text</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">Model#db_insert_into</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_order_asc-instance_method" title="Model#db_get_all_order_asc (method)">Model#db_get_all_order_asc</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 419</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_primary_category_id'>primary_category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:primary_category_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_title</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_text</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid title</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># lägg till artikeln
</span>    <span class='id identifier rubyid_db_insert_into'><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">db_insert_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name, text, game_id, user_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_text'>text</span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_article'>new_article</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_order_asc'><span class='object_link'><a href="Model.html#db_get_all_order_asc-instance_method" title="Model#db_get_all_order_asc (method)">db_get_all_order_asc</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='comment'># Den nyaste artikeln är alltid sist.
</span>
    <span class='comment'># lägg till i article_category_relation
</span>    <span class='id identifier rubyid_db_insert_into'><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">db_insert_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>article_id, category_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_article'>new_article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_primary_category_id'>primary_category_id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_all_categories'>all_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_categories'>all_categories</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_category'>category</span><span class='op'>|</span> 
        <span class='comment'># params[:&quot;#{category[&quot;name&quot;]}&quot;] är om checkboxen för kategorin har värdet True eller nil
</span>        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>True</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_db_insert_into'><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">db_insert_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>article_id, category_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_article'>new_article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        
    <span class='kw'>end</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_article'>new_article</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__articles__id_delete-instance_method">
  
    #<strong>POST /articles/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes one article and its relations to categories, and redirects to “/games/#game_id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s game’s id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li>Model#is_author</li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">Model#db_delete</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 576</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/:id/delete</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>   
    <span class='id identifier rubyid_article_id'>article_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> 
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_author'>is_author</span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span> 
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>article_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_game_id'>game_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__articles__id_update-instance_method">
  
    #<strong>POST /articles/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates one existing article and redirects to “articles/#article_id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s game’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_title,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s new title</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_text,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The article’s new text</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li>Model#is_author</li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_enough_categories_for_article-instance_method" title="Model#validate_enough_categories_for_article (method)">Model#validate_enough_categories_for_article</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_update_two_condition-instance_method" title="Model#db_update_two_condition (method)">Model#db_update_two_condition</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">Model#db_delete</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">Model#db_insert_into</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 523</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/articles/:id/update</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_article_id'>article_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_author'>is_author</span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_new_title'>new_title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_title</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_new_text'>new_text</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_text</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_new_category_relations'>new_category_relations</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_all_categories'>all_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_categories'>all_categories</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_category'>category</span><span class='op'>|</span> 
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>True</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
           <span class='id identifier rubyid_new_category_relations'>new_category_relations</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_category'>category</span>
        <span class='kw'>end</span>       
    <span class='kw'>end</span>

    <span class='comment'># Valideringar
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_title'>new_title</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid title</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_title'>new_title</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_enough_categories_for_article'><span class='object_link'><a href="Model.html#validate_enough_categories_for_article-instance_method" title="Model#validate_enough_categories_for_article (method)">validate_enough_categories_for_article</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_category_relations'>new_category_relations</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You must select at least one category</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Update article
</span>    <span class='id identifier rubyid_db_update_two_condition'><span class='object_link'><a href="Model.html#db_update_two_condition-instance_method" title="Model#db_update_two_condition (method)">db_update_two_condition</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_title'>new_title</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_text'>new_text</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>

    <span class='comment'># Update article_category_relation
</span>    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>article_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_category_relations'>new_category_relations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_category'>category</span><span class='op'>|</span>
        <span class='id identifier rubyid_db_insert_into'><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">db_insert_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>article_id, category_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_article_id'>article_id</span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>    

    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>articles/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_article_id'>article_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories-instance_method">
  
    #<strong>POST /categories</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new category and redirects to “/games/#game_id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the new category</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The id of the category’s game</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">Model#db_insert_into</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 273</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>

    <span class='comment'># kolla om namnet är tomt
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid name</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_insert_into'><span class='object_link'><a href="Model.html#db_insert_into-instance_method" title="Model#db_insert_into (method)">db_insert_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name, game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_game_id'>game_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories__id_delete-instance_method">
  
    #<strong>POST /categories/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes one category and all its articles, and redirects to “/games/#game_id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The category’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>game_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The category’s game’s id</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li><span class='object_link'><a href="#delete_all_articles_in_category-instance_method" title="#delete_all_articles_in_category (method)">#delete_all_articles_in_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">Model#db_delete</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 358</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/:id/delete</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:game_id</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_delete_all_articles_in_category'><span class='object_link'><a href="#delete_all_articles_in_category-instance_method" title="#delete_all_articles_in_category (method)">delete_all_articles_in_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_game_id'>game_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories__id_update-instance_method">
  
    #<strong>POST /categories/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Changes the name of one existing category and redirects to “/categories/#category_id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The category’s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_name,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The new name for the category</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_update_condition-instance_method" title="Model#db_update_condition (method)">Model#db_update_condition</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 327</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/:id/update</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_name</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid title</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_update_condition'><span class='object_link'><a href="Model.html#db_update_condition-instance_method" title="Model#db_update_condition (method)">db_update_condition</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__games-instance_method">
  
    #<strong>POST /games</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new game and redirects to “/”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the new game</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_insert_one_into-instance_method" title="Model#db_insert_one_into (method)">Model#db_insert_one_into</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 157</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>

    <span class='comment'># kolla om namnet är tomt
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid name</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_insert_one_into'><span class='object_link'><a href="Model.html#db_insert_one_into-instance_method" title="Model#db_insert_one_into (method)">db_insert_one_into</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__games__id_delete-instance_method">
  
    #<strong>POST /games/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes one game and its categories and articles, and redirects to “/games”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID of the article</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li><span class='object_link'><a href="#delete_all_articles_in_category-instance_method" title="#delete_all_articles_in_category (method)">#delete_all_articles_in_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">Model#db_delete</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 238</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/:id/delete</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># ta bort alla artiklar, kategorier och relations
</span>    <span class='id identifier rubyid_all_categories'>all_categories</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>game_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_all_categories'>all_categories</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_category'>category</span><span class='op'>|</span>
        <span class='id identifier rubyid_delete_all_articles_in_category'><span class='object_link'><a href="#delete_all_articles_in_category-instance_method" title="#delete_all_articles_in_category (method)">delete_all_articles_in_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Article_Category_Relation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_delete'><span class='object_link'><a href="Model.html#db_delete-instance_method" title="Model#db_delete (method)">db_delete</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__games__id_update-instance_method">
  
    #<strong>POST /games/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Changes the name of one existing game and redirects to “/games/:id”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID of the article</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_name,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The new name of the article</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>#is_admin</li>
    
      <li><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">Model#is_integer_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">Model#validate_text_length</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 207</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/:id/update</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_admin'>is_admin</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Access denied</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_name</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_integer_empty'><span class='object_link'><a href="Model.html#is_integer_empty-instance_method" title="Model#is_integer_empty (method)">is_integer_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid title</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_validate_text_length'><span class='object_link'><a href="Model.html#validate_text_length-instance_method" title="Model#validate_text_length (method)">validate_text_length</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The title is too long. (More than 100 characters)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_db_update_condition'><span class='object_link'><a href="Model.html#db_update_condition-instance_method" title="Model#db_update_condition (method)">db_update_condition</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Game</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_game_id'>game_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_game_id'>game_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__login-instance_method">
  
    #<strong>POST /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Attempts login and updates the session and redirects to “/games”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The password</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">Model#db_get_all_equal</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_user_and_pass-instance_method" title="Model#validate_user_and_pass (method)">Model#validate_user_and_pass</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#authentication-instance_method" title="Model#authentication (method)">Model#authentication</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#cooldown_validation-instance_method" title="Model#cooldown_validation (method)">Model#cooldown_validation</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 87</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_attempts_given'>attempts_given</span> <span class='op'>=</span> <span class='int'>3</span>
    <span class='id identifier rubyid_min_time_between_login'>min_time_between_login</span> <span class='op'>=</span> <span class='int'>10</span>
    <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_db_get_all_equal'><span class='object_link'><a href="Model.html#db_get_all_equal-instance_method" title="Model#db_get_all_equal (method)">db_get_all_equal</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lparen'>(</span><span class='rparen'>)</span>  

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_validate_user_and_pass'><span class='object_link'><a href="Model.html#validate_user_and_pass-instance_method" title="Model#validate_user_and_pass (method)">validate_user_and_pass</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pw_digest'>pw_digest</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pw_digest</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_authentication'><span class='object_link'><a href="Model.html#authentication-instance_method" title="Model#authentication (method)">authentication</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_pw_digest'>pw_digest</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user_id'>user_id</span>
            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>    

    <span class='comment'># Cooldown validering
</span>    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_redirect_route'>redirect_route</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/show_login</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_cooldown_valid'>cooldown_valid</span> <span class='op'>=</span> <span class='id identifier rubyid_cooldown_validation'><span class='object_link'><a href="Model.html#cooldown_validation-instance_method" title="Model#cooldown_validation (method)">cooldown_validation</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_attempts_given'>attempts_given</span><span class='comma'>,</span> <span class='id identifier rubyid_min_time_between_login'>min_time_between_login</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_cooldown_valid'>cooldown_valid</span> <span class='op'>==</span> <span class='kw'>false</span>
        <span class='id identifier rubyid_redirect_route'>redirect_route</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Too many login attempts at a short time</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_cooldown_valid'>cooldown_valid</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_redirect_route'>redirect_route</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:cooldown_tid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_redirect_route'>redirect_route</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__logout-instance_method">
  
    #<strong>POST /logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The user log outs and redirects to “/games”</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 127</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/logout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/games</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__register-instance_method">
  
    #<strong>POST /register</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Registers a new user and redirects to either “/invalid” or “/show_login”</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entered username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entered password</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password_confirm,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the repeated password</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">#is_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#validate_user_and_pass-instance_method" title="Model#validate_user_and_pass (method)">Model#validate_user_and_pass</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">Model#is_empty</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#is_username_unique-instance_method" title="Model#is_username_unique (method)">Model#is_username_unique</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#register_user-instance_method" title="Model#register_user (method)">Model#register_user</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 34</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/register</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_logged_in'><span class='object_link'><a href="#is_logged_in-instance_method" title="#is_logged_in (method)">is_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_password_confirm'>password_confirm</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password_confirm</span><span class='rbracket'>]</span>

    <span class='comment'># Validera så att username och password inte är nil, samt att username inte är endast mellanslag
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_validate_user_and_pass'><span class='object_link'><a href="Model.html#validate_user_and_pass-instance_method" title="Model#validate_user_and_pass (method)">validate_user_and_pass</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_is_empty'><span class='object_link'><a href="Model.html#is_empty-instance_method" title="Model#is_empty (method)">is_empty</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid username or password</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Validering om username är unikt
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_is_username_unique'><span class='object_link'><a href="Model.html#is_username_unique-instance_method" title="Model#is_username_unique (method)">is_username_unique</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The username is not unique</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='comment'># Kolla password
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_register_user'><span class='object_link'><a href="Model.html#register_user-instance_method" title="Model#register_user (method)">register_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='id identifier rubyid_password_confirm'>password_confirm</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/show_login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The passwords does not match</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr  5 09:04:00 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.2).
</div>

    </div>
  </body>
</html>